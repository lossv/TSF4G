#!/bin/bash

INSTALL_PATH=/usr/local/tserver
ROOT_DIR=`pwd`

usage()
{
	echo "-p install path"
	echo "-h help"
}

while getopts "p:h" option 
do
	case "$option" in
	p)
		INSTALL_PATH=$OPTARG
		;;
	h)
		usage;
		exit 0;
		;;
	:|\?) 
		usage;
		exit 1;
		;;
	esac
done


cp common.mk.tpl common.mk
sed -i 's#_INSTALL_PREFIX#'${INSTALL_PATH}'#g' common.mk
sed -i 's#_ROOT_DIR#'${ROOT_DIR}'#g' common.mk

if [ ! -d package/include ];then
mkdir -p package/include
fi

if [ ! -d package/bin ];then
mkdir -p package/bin
fi

if [ ! -d package/lib ];then
mkdir -p package/lib
fi

echo "ROOT_DIR=${ROOT_DIR}"
echo "INSTALL_PATH=${INSTALL_PATH}"
echo "succeed"
exit 0;
